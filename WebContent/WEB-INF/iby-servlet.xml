<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		">
		
	<!-- 页面渲染 -->
	<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
	</bean>
	<!-- end -->
	
	
    <!-- 定时任务 -->
	<bean id="addressTask" class="com.fatiny.task.AddressTask"/>
	<!-- 定时任务配置 -->
	<bean id="jobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
	    <property name="group" value="job_work"/>
	    <property name="name" value="job_work_name"/>
	    <!--false表示等上一个任务执行完后再开启新的任务-->
	    <property name="concurrent" value="false"/>
	    <property name="targetObject">
	        <ref bean="addressTask"/>
	    </property>
	    <property name="targetMethod">
	        <value>run</value>
	    </property>
	</bean>
	<!--  调度触发器 -->
	<bean id="myTrigger"
	      class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
	    <property name="name" value="work_default_name"/>
	    <property name="group" value="work_default"/>
	    <property name="jobDetail">
	        <ref bean="jobDetail" />
	    </property>
	    <property name="cronExpression">
	    	<!-- 每天晚上11点执行一次 -->
	    	<!-- <value>0 0 23 * * ?</value> -->
	    	<!-- 10秒运行一次 -->
	        <value>0/10 * * * * ?</value>
	    </property>
	</bean>
	<!-- 调度工厂 -->
	<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
	    <property name="triggers">
	        <list>
	            <ref bean="myTrigger"/>
	        </list>
	    </property>
	</bean>
	
	<!-- reload properties -->
	<bean
		class="com.morgan.design.properties.internal.ReloadablePropertyPostProcessor">
		<constructor-arg ref="propertyConfigurator" />
		<constructor-arg ref="eventNotifier" />
		<constructor-arg ref="conversionService" />
	</bean>

	<bean  id="propertyConfigurator"
		class="com.morgan.design.properties.internal.ReadablePropertySourcesPlaceholderConfigurer">
		<property name="ignoreUnresolvablePlaceholders" value="false" />
		<property name="ignoreResourceNotFound" value="true" />
		<constructor-arg ref="eventNotifier" />
		<constructor-arg ref="propertyResolver" />
		<property name="locations">
			<list>
				<value>classpath*:META-INF/*.properties</value>
				<value>classpath:test.properties</value>
				<value>file:${CONFIG_DIR}/global.properties</value>
			</list>
		</property>
	</bean>

<!--     <mvc:interceptors>   -->
<!--   		<bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" ></bean> -->
<!-- 	</mvc:interceptors> -->

	<!-- 配置国际化资源文件路径 -->
<!-- 	<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"> -->
		<!-- 定义消息资源文件的相对路径 -->
<!-- 		<property name="basename" > -->
<!-- 			<list> -->
<!-- 				<value>message</value>   -->
<!-- 			</list> -->
<!-- 		</property> -->
<!-- 		<property name="useCodeAsDefaultMessage" value="true" />    -->
		
<!-- 	</bean> -->
	 <!-- 基于Cookie的本地化解析器 -->
<!-- 	 <bean id="localeResolver" class="org.springframework.web.servlet.i18n.CookieLocaleResolver"> -->
	 	<!-- 设置最大有效时间，如果是-1，则不存储，浏览器关闭后即失效，默认为Integer.MAX_INT-->
<!-- 	 	<property name="cookieMaxAge" value="604800"/> -->
<!-- 	 	<property name="defaultLocale" value="zh_CN"/> -->
	 	<!-- 设置cookieName名称，可以根据名称通过js来修改设置，也可以像上面演示的那样修改设置，默认的名称为 类名+LOCALE（即：org.springframework.web.servlet.i18n.CookieLocaleResolver.LOCALE-->
<!-- 	 	<property name="cookieName" value="Language"></property> -->
<!-- 	 </bean> -->
	 
	<!--<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver" />-->
<!-- 	 <bean name="languageController" class="com.fatiny.controller.LanguageController">   -->
        <!--(1)依赖注入,配置当前类中相应的属性-->  
<!--         <property name="localeResolver" ref="localeResolver"></property>   -->
<!--     </bean>   -->
    
</beans>